Should really just implement all of this:
http://www.gnu.org/software/libc/manual/html_node/Implementing-a-Shell.html
